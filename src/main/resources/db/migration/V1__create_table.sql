CREATE TABLE IF NOT EXISTS BOOKS
  (
     ID         BIGINT GENERATED BY DEFAULT AS IDENTITY,
     CREATED_AT TIMESTAMP,
     CREATED_BY BIGINT,
     UPDATED_AT TIMESTAMP,
     UPDATED_BY BIGINT,
     AUTHOR     VARCHAR(255),
     NAME       VARCHAR(255),
     PRICE      DECIMAL(19, 2),
     STATUS     INTEGER NOT NULL,
     STOCK      INTEGER,
     PRIMARY KEY (ID)
  );

CREATE TABLE IF NOT EXISTS ORDERS
  (
     ID           BIGINT GENERATED BY DEFAULT AS IDENTITY,
     CREATED_AT   TIMESTAMP,
     CREATED_BY   BIGINT,
     UPDATED_AT   TIMESTAMP,
     UPDATED_BY   BIGINT,
     ORDER_STATUS INTEGER,
     QUANTITY     INTEGER,
     TOTAL_PRICE  DECIMAL(19, 2),
     BOOK_ID      BIGINT,
     CUSTOMER_ID  BIGINT,
     PRIMARY KEY (ID)
  );

CREATE TABLE IF NOT EXISTS ROLES
  (
     ID         BIGINT GENERATED BY DEFAULT AS IDENTITY,
     CREATED_AT TIMESTAMP,
     CREATED_BY BIGINT,
     UPDATED_AT TIMESTAMP,
     UPDATED_BY BIGINT,
     NAME       VARCHAR(255),
     STATUS     INTEGER NOT NULL,
     PRIMARY KEY (ID)
  );

CREATE TABLE IF NOT EXISTS USERS
  (
     ID         BIGINT GENERATED BY DEFAULT AS IDENTITY,
     CREATED_AT TIMESTAMP,
     CREATED_BY BIGINT,
     UPDATED_AT TIMESTAMP,
     UPDATED_BY BIGINT,
     EMAIL      VARCHAR(255),
     NAME       VARCHAR(255),
     PASSWORD   VARCHAR(255),
     STATUS     INTEGER NOT NULL,
     SURNAME    VARCHAR(255),
     USERNAME   VARCHAR(255),
     PRIMARY KEY (ID)
  );

CREATE TABLE IF NOT EXISTS USERS_ROLES
  (
     USER_ID   BIGINT NOT NULL,
     ROLE_ID  BIGINT NOT NULL
  );

ALTER TABLE ROLES ADD CONSTRAINT uk_ofx66keruapi6vyqpv6f2or37 UNIQUE (NAME);
ALTER TABLE USERS ADD CONSTRAINT uk_6dotkott2kjsp8vw4d0m25fb7 UNIQUE (EMAIL);
ALTER TABLE USERS ADD CONSTRAINT uk_r43af9ap4edm43mmtq01oddj6 UNIQUE (USERNAME);
ALTER TABLE ORDERS ADD CONSTRAINT fki0uonhq5m6jxxlt5smyobjrdv FOREIGN KEY (BOOK_ID) REFERENCES BOOKS;
ALTER TABLE ORDERS ADD CONSTRAINT fksjfs85qf6vmcurlx43cnc16gy FOREIGN KEY (CUSTOMER_ID) REFERENCES USERS;
ALTER TABLE USERS_ROLES ADD CONSTRAINT fka62j07k5mhgifpp955h37ponj FOREIGN KEY (ROLE_ID) REFERENCES ROLES;
ALTER TABLE USERS_ROLES ADD CONSTRAINT fk7v417qhe0i2m9h8njggvciv00 FOREIGN KEY (USER_ID) REFERENCES USERS;